# MVP 1 Acceptance Criteria (Done Checklist)

## 드랍인 신청/안내 + 운영자 결제확정(승인) 운영

> 이 체크리스트는 “MVP1이 끝났는지”를 판단하기 위한 최소 기준입니다.

---

## A. 도메인/보안 경계

- [ ] `example.com`(public) 과 `admin.example.com`(admin) 이 정상 동작한다
- [ ] 운영자 세션 쿠키가 host-only로 설정되어 `admin.example.com`에서만 유효하다
- [ ] public 도메인에서 전화번호/이메일 등 PII가 직접 노출되지 않는다(미노출 또는 마스킹)
- [ ] admin에서만 PII(전화번호/이메일)를 조회할 수 있다

---

## B. Public: 신청 생성(Apply)

- [ ] 사용자가 링크로 접속해 날짜/시간(슬롯)을 선택할 수 있다
- [ ] 신청 폼에 이름 + 전화번호(필수), 이메일(선택) 입력이 가능하다
- [ ] 제출 시 Booking이 생성되고 상태가 `PENDING_PAYMENT`로 저장된다
- [ ] 신청 완료 화면에 아래가 노출된다
  - [ ] 입금 안내(계좌/금액/정책 텍스트 등 Box 기반 안내)
  - [ ] “확정은 입금 확인 후 처리됩니다.” 문구
  - [ ] “조회 링크로 상태를 확인할 수 있습니다.” 문구
  - [ ] 조회 링크(토큰 기반)

---

## C. Public: 상태 조회(Status by Token)

- [ ] `/status/[token]` 형태로 로그인 없이 상태 조회가 가능하다
- [ ] 상태가 `PENDING_PAYMENT / CONFIRMED / WAITLISTED / CANCELED` 중 하나로 표시된다
- [ ] 토큰은 링크 불변이다(상태가 바뀌어도 같은 링크로 최신 상태가 보인다)
- [ ] 토큰 TTL이 30일이다
  - [ ] 만료된 토큰 접근 시 “만료 안내” 화면을 보여준다(상태/PII 미노출)
  - [ ] 만료 후 처리는 “운영자에게 문의” 안내로 충분(자동 재발급 UX는 MVP 필수 아님)

---

## D. Admin: 운영자 인증(매직 링크)

- [ ] 운영자가 이메일로 매직 링크 로그인을 할 수 있다
- [ ] 로그인 후 세션이 유지된다(새로고침/페이지 이동)

---

## E. Admin: 슬롯/정원 관리

- [ ] 요일 반복 템플릿(SlotTemplate)로 슬롯/정원을 생성/수정할 수 있다
- [ ] 특정 날짜 예외(SlotException)로 “비활성화(휴무/대관 등)”를 설정할 수 있다
- [ ] public에서 슬롯 조회 시 템플릿+예외가 반영된다(비활성화된 날짜는 신청 불가)

---

## F. Admin: 신청 목록/상태 변경

- [ ] 운영자는 신청 목록을 볼 수 있다(최소: 최신순 + 상태 표시)
- [ ] 운영자는 `PENDING_PAYMENT`에 대해 “결제확정(승인)”을 할 수 있다
- [ ] 승인 시 정원 평가 규칙이 적용된다
  - [ ] capacity는 `CONFIRMED`만 카운트한다
  - [ ] 승인 시점에 정원을 평가한다
    - [ ] 여유 있으면 `CONFIRMED`
    - [ ] 초과면 `WAITLISTED`
- [ ] 운영자는 취소 처리할 수 있다(`CANCELED`)
  - [ ] MVP에서는 운영자만 취소 가능(신청자 자가 취소 없음)
- [ ] 운영자 콘솔에 WAITLISTED 안내 템플릿(복붙용)이 있다

---

## G. 오버부킹 방지(동시성)

- [ ] 동시 승인 상황에서 오버부킹이 발생하지 않는다(파일럿 기준 0건)
- [ ] 승인 로직이 DB 트랜잭션/락 등으로 원자적으로 처리된다(구현 방식은 자유, 결과가 핵심)

---

## H. 운영자 알림 이메일

- [ ] Booking 생성 시 운영자에게 이메일이 즉시 발송된다
- [ ] 이메일에 최소 아래 정보가 포함된다
  - [ ] 신청 슬롯(날짜/시간)
  - [ ] 신청자 이름
  - [ ] admin에서 확인 가능한 링크(또는 “어드민에서 확인” 안내)
- [ ] 이메일 발송 실패 시 서버 로그에 실패가 남는다(최소 로깅)

---

## I. 기본 운영 방어(스팸/악성 입력)

- [ ] 신청 생성 엔드포인트에 최소한의 방어가 있다(택1 이상)
  - [ ] IP 기반 rate limit
  - [ ] honeypot 필드
  - [ ] 간단한 captcha(선택)

---

## J. Non-goals 준수

- [ ] PG 결제/카드결제/자동 환불/노쇼 정산이 구현되어 있지 않다
- [ ] 신청자 자동 알림(SMS/Email)이 기본 제공되지 않는다
- [ ] 신청자 자가 취소 기능이 없다
- [ ] 현장 코치/리셉션 read-only 화면/권한이 없다
- [ ] 멀티 지점 기능이 없다

---

## K. 최소 운영 준비(레포 기준)

- [ ] `.env.example`이 있다(필수 환경변수 목록 포함)
- [ ] DB 마이그레이션으로 빈 DB에서 구동 가능하다
- [ ] (권장) seed 데이터(예: Box 1개)가 있어 로컬에서 빠르게 확인 가능하다
